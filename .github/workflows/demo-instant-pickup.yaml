name: "Demo: Instant Job Pickup"

on:
  workflow_dispatch:

jobs:
  instant-pickup:
    runs-on: [self-hosted, doks-demo]
    steps:
      - name: Record start time
        run: |
          echo "============================================"
          echo "  DEMO: Instant Job Pickup"
          echo "============================================"
          echo ""
          echo "Job started at: $(date -u +%Y-%m-%dT%H:%M:%S.%3NZ)"
          echo ""
          echo "This job demonstrates sub-second pickup when"
          echo "warm capacity (pause pods) is available."
          echo ""

      - name: Quick task
        run: |
          echo "Running a quick task..."
          sleep 5
          echo "Task complete!"

      - name: Record end time
        run: |
          echo ""
          echo "Job completed at: $(date -u +%Y-%m-%dT%H:%M:%S.%3NZ)"
          echo ""
          echo "SUCCESS: Job picked up instantly by preempting pause pod."
